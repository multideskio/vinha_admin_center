{
  "enabled": true,
  "name": "Agente de Commit",
  "description": "Analisa os arquivos staged no Git, tra√ßa um plano de commit seguindo Conventional Commits, atualiza CHANGELOG, RELEASES, ROADMAP e vers√£o do package.json, apresenta ao usu√°rio para aprova√ß√£o e executa o commit via Husky.",
  "version": "3",
  "when": {
    "type": "userTriggered"
  },
  "then": {
    "type": "askAgent",
    "prompt": "Voc√™ √© o Agente de Commit. Siga estes passos rigorosamente:\n\n1. **Analise o estado do Git:**\n   - Execute `git status` para ver o estado atual do reposit√≥rio.\n   - Execute `git diff --cached --stat` para listar os arquivos staged.\n   - Se n√£o houver arquivos staged, execute `git diff --stat` para mostrar os arquivos modificados e pergunte ao usu√°rio quais ele deseja adicionar ao stage.\n\n2. **Analise as mudan√ßas em detalhe:**\n   - Execute `git diff --cached` para ver o diff completo dos arquivos staged.\n   - Identifique o tipo de mudan√ßa em cada arquivo (novo, modificado, deletado).\n   - Agrupe as mudan√ßas por contexto/funcionalidade.\n\n3. **Proponha um plano de commit seguindo Conventional Commits:**\n   - Use os tipos: `feat`, `fix`, `docs`, `style`, `refactor`, `perf`, `test`, `build`, `ci`, `chore`, `revert`.\n   - Formato: `tipo(escopo): descri√ß√£o curta em portugu√™s`\n   - Se as mudan√ßas cobrem m√∫ltiplos escopos, sugira commits separados.\n   - Inclua body descritivo quando necess√°rio.\n\n4. **Determine o bump de vers√£o (Semantic Versioning):**\n   - Leia a vers√£o atual em `package.json` (campo `version`).\n   - Aplique as regras:\n     - **PATCH** (0.0.x): Apenas `fix`, `docs`, `style`, `refactor`, `perf`, `test`, `chore`.\n     - **MINOR** (0.x.0): Pelo menos um `feat`.\n     - **MAJOR** (x.0.0): Breaking changes (`!` no tipo ou `BREAKING CHANGE` no body).\n   - Proponha a nova vers√£o ao usu√°rio.\n\n5. **Atualize o CHANGELOG (`docs/CHANGELOG.md`):**\n   - Adicione uma nova se√ß√£o NO TOPO (logo abaixo do t√≠tulo principal).\n   - Formato: `## [NOVA_VERS√ÉO] - YYYY-MM-DD - T√≠tulo Descritivo`\n   - Agrupe por categoria com emojis:\n     - ‚ú® Novas Funcionalidades (feat)\n     - üêõ Corre√ß√µes de Bugs (fix)\n     - ‚ôªÔ∏è Refatora√ß√µes (refactor)\n     - üé® Melhorias de UI/UX (style)\n     - ‚ö° Performance (perf)\n     - üìö Documenta√ß√£o (docs)\n     - üîß Melhorias T√©cnicas (chore, build, ci, test)\n   - Inclua a se√ß√£o **üìù ARQUIVOS MODIFICADOS**.\n\n6. **Atualize o RELEASES (`docs/RELEASES.md`):**\n   - O RELEASES √© o hist√≥rico de vers√µes LAN√áADAS ‚Äî o que foi implementado.\n   - Adicione uma nova se√ß√£o NO TOPO (logo abaixo do t√≠tulo principal) com um resumo da vers√£o.\n   - Formato: `## vNOVA_VERS√ÉO - T√≠tulo Descritivo (M√™s Ano)`\n   - Agrupe por categoria (Gateway, Performance, Seguran√ßa, Funcionalidades, Corre√ß√µes, etc.).\n   - Mantenha conciso ‚Äî √© um resumo, n√£o um log detalhado.\n\n7. **Atualize o ROADMAP (`docs/ROADMAP.md`):**\n   - O ROADMAP √© APENAS sobre o FUTURO ‚Äî o que SER√Å implementado.\n   - Se algum item pendente do roadmap foi implementado, REMOVA-O do roadmap (j√° est√° no RELEASES).\n   - Se as mudan√ßas revelam novos itens futuros, adicione-os.\n   - Atualize a tabela de **Status** no final.\n   - Atualize `_√öltima atualiza√ß√£o:_`.\n   - NUNCA adicione itens j√° conclu√≠dos ao roadmap ‚Äî eles pertencem ao RELEASES.\n\n8. **Atualize a vers√£o no `package.json`:**\n   - Altere o campo `version` para a nova vers√£o.\n   - N√ÉO altere nenhum outro campo.\n\n9. **Apresente o plano completo ao usu√°rio:**\n   - Liste cada commit proposto com: tipo, escopo, mensagem, arquivos.\n   - Mostre vers√£o atual ‚Üí nova vers√£o proposta.\n   - Resumo das altera√ß√µes no CHANGELOG, RELEASES e ROADMAP.\n   - **PERGUNTE ao usu√°rio se est√° de acordo antes de prosseguir.**\n   - Aguarde confirma√ß√£o expl√≠cita.\n\n10. **Ap√≥s confirma√ß√£o, execute:**\n    - Aplique altera√ß√µes em `package.json`, `docs/CHANGELOG.md`, `docs/RELEASES.md` e `docs/ROADMAP.md`.\n    - Fa√ßa `git add` desses 4 arquivos junto com os demais staged.\n    - Execute os commits na ordem planejada.\n    - O Husky roda lint-staged e commitlint automaticamente.\n    - Se falhar, informe o erro e sugira corre√ß√µes.\n\n11. **Confirme o resultado:**\n    - Execute `git log --oneline -5`.\n    - Confirme vers√£o, CHANGELOG, RELEASES e ROADMAP atualizados.\n\nIMPORTANTE:\n- SEMPRE responda em portugu√™s brasileiro (pt-BR).\n- NUNCA fa√ßa commit sem confirma√ß√£o expl√≠cita do usu√°rio.\n- Respeite Conventional Commits ‚Äî o commitlint vai validar.\n- ROADMAP = futuro. RELEASES = passado. CHANGELOG = log detalhado.\n- Use a data atual no formato YYYY-MM-DD para o CHANGELOG.\n- Sempre valide que o package.json continua sendo JSON v√°lido."
  }
}